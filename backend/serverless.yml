service: my-api

provider:
  name: aws
  runtime: python3.8
  region: us-east-1
  stage: dev
  environment:
    S3_BUCKET_URL: library-bucket-dev
    URL_DEFAULT_TTL: 60
    user_pool_id: us-east-1_l6aW4OJ2m
    client_id: 2a64v33th06gk4kskknmjua07s
  iamRoleStatements:
    - Effect: Allow
      Action:
        - cognito-idp:AdminInitiateAuth
        - cognito-idp:AdminCreateUser
        - cognito-idp:AdminSetUserPassword
      Resource: "*"

functions:
  # storage
  - ${file(./lambdas/storage/serverless.yml)}

  # books
  - ${file(./lambdas/books/serverless.yml)}

resources:
  # DynamoDB
  - ${file(resources/dynamodb_table.yml)}

  # API Authorizer
  - ${file(resources/api_authorizer.yml)}
